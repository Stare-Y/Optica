<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TechLens.Presentacion.Views.Reportes"
             Title="Reportes">

    <Shell.BackButtonBehavior>
        <BackButtonBehavior IsEnabled="False" IsVisible="False" />
    </Shell.BackButtonBehavior>


    <Grid
        ColumnDefinitions="*,2*">

        <Grid
            Padding="20"
            Grid.Column="0"
            RowDefinitions="Auto,*,*,*"
            VerticalOptions="FillAndExpand"
            BackgroundColor="{StaticResource Sub}">

            <Label
                Grid.Row="0"
                VerticalOptions="Start"
                Text="Buscar por:"
                Style="{StaticResource Label}"/>

            <SearchBar
                Margin="0,10,0,0"
                VerticalOptions="Start"
                Placeholder="Busqueda..."
                WidthRequest="350"
                Grid.Row="1"
                Style="{StaticResource SearchBar}">
                
            </SearchBar>

            <Grid
                Grid.Row="2"
                RowSpacing="100"
                RowDefinitions="*,*,*">

                <Picker                   
                    Grid.Row="0"
                    Style="{StaticResource Pickers}"
                    Title="Filtrar por:"
                    TitleColor="{StaticResource Black}"
                    HorizontalOptions="Center"
                    ItemsSource="{Binding TipoMica}"
                    WidthRequest="300"
                    HeightRequest="75"
                    x:Name="PickerReporteTipoMica">


                </Picker>

                <Picker              
                    Grid.Row="1"
                    Style="{StaticResource Pickers}"
                    Title="Filtrar por:"
                    TitleColor="{StaticResource Black}"
                    HorizontalOptions="Center"
                    ItemsSource="{Binding TipoMica}"
                    WidthRequest="300"
                    HeightRequest="75"
                    x:Name="PickerReporteMaterialMica">


                </Picker>

                <Picker        
                    Grid.Row="2"
                    Style="{StaticResource Pickers}"
                    Title="Filtrar por:"
                    TitleColor="{StaticResource Black}"
                    HorizontalOptions="Center"
                    ItemsSource="{Binding TipoMica}"
                    WidthRequest="300"
                    HeightRequest="75"
                    x:Name="PickerReporteFabricanteMica">


                </Picker>

            </Grid>

            <Grid
                VerticalOptions="End"
                Grid.Row="3"
                RowDefinitions="*,*"
                ColumnDefinitions="*,*">

                <Button
                    x:Name="BtnRegresar"
                    Grid.Row="0"
                    Grid.Column="0"
                    Text="Regresar"
                    VerticalOptions="End"
                    CornerRadius="20"
                    Style="{StaticResource Boton}"
                    Clicked="BtnRegresar_Clicked">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="LightGray" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>

                </Button>

                <Label
                    VerticalOptions="Start"
                    Margin="0,5,0,0"
                    Grid.Row="1"
                    Grid.Column="0"
                    Text="(Esc)"     
                    FontSize="12"
                    FontAttributes="Bold"
                    Style="{StaticResource Label}"/>


                <Button
                    x:Name="BtnImprimir"
                    Grid.Row="0"
                    Grid.Column="1"
                    Text="Imprimir"
                    VerticalOptions="End"      
                    CornerRadius="20"
                    Style="{StaticResource Boton}"
                    Clicked="BtnImprimir_Clicked">

                </Button>

                <Label
                    VerticalOptions="Start"
                    Margin="0,5,0,0"
                    Grid.Row="1"
                    Grid.Column="1"
                    Text="(Ctrl + S)"     
                    FontSize="12"
                    FontAttributes="Bold"
                    Style="{StaticResource Label}"/>

            </Grid>

            

        </Grid>

        <ScrollView
            Grid.Column="1"
            VerticalOptions="FillAndExpand">

            <Grid
                Padding="30"
                RowDefinitions="Auto,*,*"
                RowSpacing="50"
                HorizontalOptions="FillAndExpand"
                VerticalOptions="FillAndExpand">

                <Label
                    Grid.Row="0"
                    VerticalOptions="Start"
                    Text="Tabla de Micas"
                    Style="{StaticResource LabelTitle}"/>

                <Grid
                    VerticalOptions="FillAndExpand"
                    Grid.Row="1">

                    <Frame
                        Grid.Row="1"
                        BorderColor="{StaticResource SubTier}"
                        BackgroundColor="{StaticResource Main}"
                        CornerRadius="10"
                        VerticalOptions="Start"
                        HorizontalOptions="FillAndExpand">

                        <Grid
                            ColumnDefinitions="Auto,*,Auto,*,Auto,*,Auto,*,Auto,*,Auto,*,Auto">
                            <!-- ID -->
                            <Label
                                Text="ID"
                                Style="{StaticResource Label}"
                                Grid.Column="0"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="1"/>

                            <!-- Tipo -->
                            <Label
                                Text="Tipo"
                                Style="{StaticResource Label}"
                                Grid.Column="2"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="3"/>

                            <!-- Fabricante -->
                            <Label
                                Text="Fabricante"
                                Style="{StaticResource Label}"
                                Grid.Column="4"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="5"/>

                            <!-- Material -->
                            <Label
                                Text="Material"
                                Style="{StaticResource Label}"
                                Grid.Column="6"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="7"/>

                            <!-- Tratamiento -->
                            <Label
                                Text="Tratamiento"
                                Style="{StaticResource Label}"
                                Grid.Column="8"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="9"/>

                            <!-- Propósito -->
                            <Label
                                Text="Proposito"
                                Style="{StaticResource Label}"
                                Grid.Column="10"
                                HorizontalOptions="Center"/>

                            <!-- Línea separadora -->
                            <BoxView
                                WidthRequest="2"
                                Color="{StaticResource SubTier}"
                                VerticalOptions="FillAndExpand"
                                Grid.Column="11"/>

                            <!-- Precio -->
                            <Label
                                Text="Precio"
                                Style="{StaticResource Label}"
                                Grid.Column="12"
                                HorizontalOptions="Center"/>

                        </Grid>

                    </Frame>

                    <CollectionView
                        ItemsSource="{Binding ReporteMicas}"
                        SelectionMode="Single"
                        x:Name="CollectionViewMicas"
                        SelectionChanged="CollectionViewMicas_SelectionChanged">

                        <CollectionView.ItemTemplate>
                            <DataTemplate>

                                <Border
                                    Style="{StaticResource RoundedDataMicaStyle}">

                                    <Border.Shadow>
                                        <Shadow
                                            Offset="10,10"
                                            Radius="5"
                                            Opacity="0.5" />
                                    </Border.Shadow>

                                    <Grid
                                      ColumnDefinitions="Auto,*,Auto,*,Auto,*,Auto,*,Auto,*,Auto,*,Auto">

                                        <Label                    
                                            Grid.Column="0"
                                            Text="{Binding IdMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="1"/>

                                        <Label
                                            Grid.Column="2"
                                            Text="{Binding TipoMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="3"/>

                                        <Label
                                            Grid.Column="4"
                                            Text="{Binding FabricanteMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="5"/>

                                        <Label
                                            Grid.Column="6"
                                            Text="{Binding MaterialMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="7"/>

                                        <Label
                                            Grid.Column="8"
                                            Text="{Binding TratamientoMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="9"/>

                                        <Label
                                            Grid.Column="10"
                                            Text="{Binding PropositoMica}"
                                            Style="{StaticResource Label}"/>

                                        <BoxView
                                            WidthRequest="2"
                                            Color="{StaticResource SubTier}"
                                            VerticalOptions="FillAndExpand"
                                            Grid.Column="11"/>

                                        <Label
                                            Grid.Column="12"
                                            Text="{Binding PrecioMica, StringFormat='${0:'}"
                                            Style="{StaticResource Label}"/>

                                    </Grid>

                                </Border>

                            </DataTemplate>

                        </CollectionView.ItemTemplate>

                    </CollectionView>

                </Grid>

            </Grid>

        </ScrollView>

    </Grid>
    
</ContentPage>